# üß† Diploma Web Server Backend

–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, —Ä–∞—Å—á—ë—Ç–æ–≤ —Ä–µ—Å—É—Ä—Å–∞, –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ REST API.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker

–¢—ã –º–æ–∂–µ—à—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç (—Å–µ—Ä–≤–µ—Ä + –ë–î) –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π ‚Äî –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker

---

### üß∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

1. –°–∫–∞—á–∞–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ Docker Desktop:  

2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
docker --version
```

---

### üßæ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### üõ†Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
docker compose up --build
```

üì¶ –≠—Ç–æ –ø–æ–¥–Ω–∏–º–µ—Ç:
- PostgreSQL 15
- FastAPI —Å–µ—Ä–≤–µ—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–º–ø–∞ –±–∞–∑—ã (`equipment_backup.sql`)

---

### üêò –î–∞–º–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `init_db/equipment_backup.sql` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.  

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏:

```
backend/
‚îú‚îÄ‚îÄ init_db/
‚îÇ   ‚îî‚îÄ‚îÄ equipment_backup.sql
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ .env
```

---

### üß† –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

- Swagger: [http://localhost:8000/docs](http://localhost:8000/docs)
- ReDoc: [http://localhost:8000/redoc](http://localhost:8000/redoc)

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π `.env.example`):

```env
DB_HOST=db
DB_PORT=5432
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=postgres
```

üìå –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ FastAPI, –∏ –≤ Docker PostgreSQL.

---

## üì¶ –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –î–µ–π—Å—Ç–≤–∏–µ                         | –ö–æ–º–∞–Ω–¥–∞                                |
|----------------------------------|-----------------------------------------|
| –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞                   | `docker compose up --build`             |
| –û—Å—Ç–∞–Ω–æ–≤–∫–∞                        | `docker compose down`                   |
| –û—á–∏—Å—Ç–∫–∞ –ë–î (—É–¥–∞–ª–µ–Ω–∏–µ volume)     | `docker compose down -v`                |
| –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–µ–∑ –∫—ç—à–∞            | `docker compose up --build --no-cache` |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É API —á–µ—Ä–µ–∑:

- `/health` ‚Äî Healthcheck
- `/equipments` ‚Äî CRUD –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- `/categories` ‚Äî CRUD –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `/equipments/search` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Ä–∞—Å—á—ë—Ç–Ω—ã–µ –ø–æ–ª—è

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –±—É–¥–µ—Ç –≤–Ω–µ–¥—Ä—è—Ç—å—Å—è ‚Äî –¥–æ–±–∞–≤–∏—Ç—Å—è JWT. –ü–æ–∫–∞ –¥–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ crud/
‚îú‚îÄ‚îÄ models/
‚îú‚îÄ‚îÄ routers/
‚îú‚îÄ‚îÄ schemas/
‚îú‚îÄ‚îÄ database.py
‚îú‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ utils.py (—Ä–∞—Å—á—ë—Ç–Ω—ã–µ –ø–æ–ª—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç.–¥.)

init_db/
‚îú‚îÄ‚îÄ equipment_backup.sql

Dockerfile
docker-compose.yml
.env
requirements.txt
```

---


## üìÅ –ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (Excel)

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏ –≤—ã–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –æ–± –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.xlsx` —Å –ø–æ–º–æ—â—å—é HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

### üîº –ò–º–ø–æ—Ä—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

**URL:** `POST /equipments/import`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª Excel —Å –∑–∞–ø–∏—Å—è–º–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
**–¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞:** `multipart/form-data`

#### üìÑ –û–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ `.xlsx`:

| name           | warranty\_years | min\_temperature | max\_temperature | link        | category\_id | mtbf\_hours |
| -------------- | --------------- | ---------------- | ---------------- | ----------- | ------------ | ----------- |
| Example Device | 3               | -10              | 55               | http\://... | 1            | 2000        |

* **`category_id`** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º `id` —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
* –ü—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ `null`.

#### üß™ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (cURL):

```bash
curl -X POST "http://localhost:8000/equipments/import" \
  -F "file=@./equipment_import.xlsx"
```

---

### üîΩ –≠–∫—Å–ø–æ—Ä—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

**URL:** `GET /equipments/export`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `.xlsx` —Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.
**–¢–∏–ø –æ—Ç–≤–µ—Ç–∞:** `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`

#### üß™ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (cURL):

```bash
curl -X GET "http://localhost:8000/equipments/export" -o equipment_export.xlsx
```
---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT, –Ω–æ –µ—Å–ª–∏ –Ω–∞–π–¥—ë—à—å –±–∞–≥ ‚Äî **–ø–æ—á–∏–Ω–∏ –∏ –ø—Ä–∏—à–ª–∏ PR, –Ω–µ –º–æ–ª—á–∏ –∫–∞–∫ broken —Å—Ç–æ—è–∫.**

---